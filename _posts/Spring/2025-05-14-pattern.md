---
layout: single
title:  "Builder & Static Factory Method íŒ¨í„´"
categories: Spring

sidebar_main: true



---

ìƒì„± íŒ¨í„´ ì¤‘ ë¹Œë”ì™€ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì„ ë¹„êµí•´ë³´ì.
{: .notice--danger}


## 1. ì™œ ê°ì²´ ìƒì„±ì´ ì¤‘ìš”í•œê°€?

- ìƒì„±ìëŠ” í•œ ë²ˆ ì •í•˜ë©´ ë°”ê¾¸ê¸° ì–´ë µë‹¤.
- ë³µì¡í•œ ê°ì²´ ìƒì„±ì„ ìº¡ìŠí™”í•˜ë©´ ì½”ë“œ í’ˆì§ˆì´ ì˜¬ë¼ê°„ë‹¤.

---

## 2. new

ê°€ì¥ ê¸°ë³¸ì ì¸ ê°ì²´ ìƒì„± ë°©ë²•ì´ë©° ë³´í†µ `new` í‚¤ì›Œë“œë¡œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. í•˜ì§€ë§Œ, ë‹¨ì ì´ ìˆê¸° ë•Œë¬¸ì— ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ê³¼ ë¹Œë” íŒ¨í„´ì´ ë“±ì¥í–ˆë‹¤.

```java
User user = new User();
```

### âœ… ì¥ì 

1. ê°ì²´ ìƒì„± ë°©ì‹ì´ ëª…í™•í•˜ê³  ì§ê´€ì ì´ë‹¤.
2. ë³„ë„ì˜ ì½”ë“œê°€ í•„ìš” ì—†ë‹¤.
3. ë‹¨ìˆœí•œ ê°ì²´ ìƒì„±ì—ì„œ ì„±ëŠ¥ì ìœ¼ë¡œ íš¨ìœ¨ì ì´ë‹¤.

### âœ… ë‹¨ì 

1. ì˜ë¯¸ë¥¼ ë‹´ê¸° ì–´ë µë‹¤.

```java
new User("John", true, 24);
```

ê° ë§¤ê°œë³€ìˆ˜ê°€ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ”ì§€ ì•Œê¸° ì–´ë µë‹¤. íŠ¹íˆ, ë§¤ê°œë³€ìˆ˜ê°€ ë§ì„ ê²½ìš° í›¨ì”¬ ì‚¬ìš©í•˜ê¸° ì–´ë µê³  ìœ ì§€ë³´ìˆ˜ë„ í˜ë“¤ë‹¤.

1. ë‹¤í˜•ì„±ì— ì œì•½ì´ ìˆë‹¤.

```java
Shape s = new Circle();
Shape s = new Shape();
// ì»´íŒŒì¼ ì‹œì ì— ì–´ë–¤ í´ë˜ìŠ¤ì¸ì§€ ê³ ì •ëœë‹¤.
```

ë°˜ë©´ì—, ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œì¸ ê²½ìš°

```java
public abstract class Shape {
    public static Shape of(String type) {
        if (type.equals("circle")) return new Circle();
        if (type.equals("square")) return new Square();
        throw new IllegalArgumentException();
    }
}
// ë°˜í™˜ íƒ€ì…ì„ ì¶”ìƒí™”í•  ìˆ˜ ìˆë‹¤.
```

---

## 3. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ (Static Factory Method)

`new` í‚¤ì›Œë“œë¡œ ìƒì„±ìë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ëŒ€ì‹ , `static method` ë¡œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

```java
public class User {
    private String name;

    private User(String name) {
        this.name = name;
    }

    public static User of(String name) {
        return new User(name);
    }
}
```

### âœ… ì¥ì 

1. ì´ë¦„ì„ ê°€ì§ˆ ìˆ˜ ìˆì–´ ê°€ë…ì„±ì´ ë†’ë‹¤.

```java
LocalDate date = LocalDate.of(2024, 5, 11);
```

ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ì˜ë¯¸ë¥¼ ì „ë‹¬í•´ì•¼ í•˜ëŠ” `new` í‚¤ì›Œë“œ ë°©ì‹ê³¼ ë‹¬ë¦¬, ì •ì  ë©”ì„œë“œëŠ” ì´ë¦„ìœ¼ë¡œ ìš©ë„ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.

`of` ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ ê°œ ë°›ì•„ ì í•©í•œ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•  ë•Œ ì‚¬ìš©ëœë‹¤.

1. ë‹¤í˜•ì„± (í•˜ìœ„ íƒ€ì…ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤)

```java
public abstract class Shape {
    public static Shape of(String type) {
        if (type.equals("circle")) return new Circle();
        if (type.equals("square")) return new Square();
        throw new IllegalArgumentException();
    }
}
```

ë°˜í™˜ íƒ€ì…ì„ ìœ ì—°í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, íŒ©í† ë¦¬ ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì–´ë–¤ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì§€ëŠ” ì™¸ë¶€ì— ìˆ¨ê¸¸ ìˆ˜ ìˆë‹¤.

### âœ… ë‹¨ì 

1. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œëŠ” ì£¼ë¡œ `private` ë˜ëŠ” `final` ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ìƒì†ì„ ë°›ê¸° ì–´ë µê±°ë‚˜ í™•ì¥í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.

```java
public class User {
    private String name;

    private User(String name) {
        this.name = name;
    }

    public static User of(String name) {
        return new User(name);
    }
}

public class AdminUser extends User {
    public AdminUser(String name) {
        super(name); // ì»´íŒŒì¼ ì—ëŸ¬: ìƒì„±ìê°€ privateì´ë¼ ì ‘ê·¼ ë¶ˆê°€
    }
}
```

1. ì •ì  ë©”ì„œë“œëŠ” ì´ë¦„ë§Œ ë³´ê³  ìƒì„±ìì¸ì§€ ëª¨ë¥¼ ìˆ˜ ìˆë‹¤. (ëª…í™•í•˜ì§€ ì•Šë‹¤)

```java
User user = User.of("Alice");

// ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“œëŠ”ì§€? (new ëŒ€ì²´)
// ê¸°ì¡´ ê°ì²´ì—ì„œ ë­”ê°€ ë³€í™˜í•˜ëŠ”ê±´ì§€?
// ê·¸ëƒ¥ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œì¸ì§€?
```

ğŸ”” ë©”ì„œë“œ ì´ë¦„ì— **ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„**í•˜ê±°ë‚˜, í”„ë¡œì íŠ¸ ì‹œ **ì»¨ë²¤ì…˜**ì„ ì •ì˜í•˜ì—¬ ê°œì„ í•  ìˆ˜ ìˆë‹¤.

---

## 4. ë¹Œë” íŒ¨í„´ (Builder)

ë³µì¡í•œ ê°ì²´ë¥¼ ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆê²Œí•˜ëŠ” ìƒì„±íŒ¨í„´ì´ë‹¤.

íŠ¹íˆ ìƒì„±ìì˜ ë§¤ê°œë³€ìˆ˜ê°€ ë§ê±°ë‚˜, ì„ íƒì ì¸ ê°’ì´ ë§ì„ ë•Œ ê°€ë…ì„±ê³¼ ìœ ì—°ì„±ì„ í¬ê²Œ í–¥ìƒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```java
User user = new User.Builder()
    .name("Alice")
    .age(25)
    .address("Seoul")
    .build();
```

### âœ… ì¥ì 

```java
// í•„ìˆ˜ ê°’ë§Œ ì„¤ì •
User user1 = new User.Builder("Alice")
    .build();

// ì„ íƒ ê°’ ì¼ë¶€ë§Œ ì„¤ì •
User user2 = new User.Builder("Bob")
    .age(30)
    .email("bob@example.com")
    .build();

// ëª¨ë“  ê°’ ì„¤ì •
User user3 = new User.Builder("Carol")
    .age(40)
    .email("carol@example.com")
    .address("Seoul")
    .phone("010-1234-5678")
    .build();
```

1. ê°€ë…ì„±ê³¼ ëª…í™•ì„±ì´ ë›°ì–´ë‚˜ë‹¤.
    
    â†’ ì–´ë–¤ ê°’ì„ ì„¤ì •í•˜ëŠ”ì§€ ëª…í™•íˆ ë³´ì´ê³ , ìˆœì„œì— êµ¬ì• ë°›ì§€ ì•ŠëŠ”ë‹¤.
    
2. í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ë§Œìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì„ íƒì  ë§¤ê°œë³€ìˆ˜ëŠ” ë‚˜ì¤‘ì— ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ìœ ì—°í•˜ê²Œ ì„¤ê³„í•  ìˆ˜ ìˆë‹¤.

1. ë¶ˆë³€ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```java
public class Person {
    // í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜
    private final String name;
    private final int age;
    // ì„ íƒì  ë§¤ê°œë³€ìˆ˜
    private final String email;  
    private final String address;  

    private Person(Builder builder) {
        this.name = builder.name;
        this.age = builder.age;
        this.email = builder.email;
        this.address = builder.address;
    }
    
    .
    .
    .
```

### âœ… ë‹¨ì 

1. ì½”ë“œì˜ ì–‘ì´ ë§ì•„ì§„ë‹¤. (`Builder`  í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì•¼í•¨)
2. ê°„ë‹¨í•œ ê°ì²´ì—” ì˜¤íˆë ¤ ê³¼í•  ìˆ˜ ìˆë‹¤.

---

## 5. Lombokì˜ @Builder

ê°œë°œìê°€ í¸í•˜ê²Œ ë¹Œë” íŒ¨í„´ì„ ì´ìš©í•˜ê¸° ìœ„í•´ Lombokì—ì„œëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•œë‹¤. @Builder ì–´ë…¸í…Œì´ì…˜ë§Œ ë¶™ì—¬ì£¼ë©´ í´ë˜ìŠ¤ë¥¼ ì»´íŒŒì¼ í•  ë•Œ, ìë™ìœ¼ë¡œ í´ë˜ìŠ¤ ë‚´ë¶€ì— ë¹Œë” APIê°€ ë§Œë“¤ì–´ì§„ë‹¤.

```java
import lombok.Builder;

@Builder
public class User {
    private String name;
    private int age;
    private String address;
}

.
.
.

User user = User.builder()
    .name("Alice")
    .age(30)
    .address("Seoul")
    .build();
```

---

## 6. Spring Framework

ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„  `UriComponents` ì¸ìŠ¤í„´ìŠ¤ë¥¼ `Uricomponentsbuilder` ë¥¼ í†µí•´ì„œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. urië¥¼ í•˜ë“œì½”ë”©í•´ì„œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ì•ˆì „í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```java
// ---- í•˜ë“œ ì½”ë”© ë°©ì‹ (ê¶Œì¥ë˜ì§€ ì•ŠìŒ)

String url = "https://api.example.com/users?id=123&active=true";
// ìœ ì§€ë³´ìˆ˜ ì–´ë µê³ 
// ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¸ì½”ë”© ëˆ„ë½ ìœ„í—˜

// ----`UriComponentsBuilder ì‚¬ìš©
public static void main(String[] args) {
    UriComponents uriComponents = UriComponentsBuilder.newInstance()
            .scheme("https")
            .host("kangworld.tistory.com")
            .build();

    System.out.println(uriComponents);
}

```

---

## 7. ì •ë¦¬

### âœ… ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ê²½ìš°

- ìƒì„±ìë³´ë‹¤ **ì´ë¦„ìœ¼ë¡œ ì˜ë¯¸ë¥¼ ë” ëª…í™•íˆ í‘œí˜„í•˜ê³  ì‹¶ì„ ë•Œ**
- **ê°ì²´ ìƒì„±ì„ ìº¡ìŠí™”**í•˜ê³  ì‹¶ì„ ë•Œ (ex. ìºì‹±, ì‹±ê¸€í„´, ì„œë¸Œíƒ€ì… ë°˜í™˜)
- ê°ì²´ ìƒì„±ì´ ë¹„êµì  ë‹¨ìˆœí•˜ê±°ë‚˜ í•„ë“œ ìˆ˜ê°€ ì ì„ ë•Œ

### âœ… ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ê²½ìš°

- ìƒì„±ìë‚˜ íŒ©í† ë¦¬ ë©”ì„œë“œë¡œëŠ” **ì¸ìê°€ ë„ˆë¬´ ë§ì•„ì„œ ê°€ë…ì„±ì´ë‚˜ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ìš¸ ë•Œ**
- í•„ë“œê°€ ë§ê³  **ê·¸ ì¤‘ ì¼ë¶€ë§Œ ì„ íƒì ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°**
- ì½ê¸° ì‰¬ìš´ ì½”ë“œê°€ í•„ìš”í•œ ê²½ìš°